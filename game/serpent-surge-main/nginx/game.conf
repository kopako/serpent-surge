server {
    # Listen to port 443 on both IPv4 and IPv6.
    listen 443 ssl default_server reuseport;
    listen [::]:443 ssl default_server reuseport;

    # Domain names this server should respond to.
    server_name ${NGINX_HOST};

    # Load the certificate files.
    ssl_certificate         /etc/letsencrypt/live/${NGINX_HOST}/fullchain.pem;
    ssl_certificate_key     /etc/letsencrypt/live/${NGINX_HOST}/privkey.pem;
    ssl_trusted_certificate /etc/letsencrypt/live/${NGINX_HOST}/chain.pem;

    # Load the Diffie-Hellman parameter.
    ssl_dhparam /etc/letsencrypt/dhparams/dhparam.pem;

    
    location / {
        root /usr/share/nginx/html;
        try_files $uri /index.html;
    }

    location /save-score {
        proxy_pass http://${BACKEND_HOST}:${BACKEND_PORT}/save-score;
        add_header Access-Control-Allow-Methods "GET, POST, OPTIONS";
        add_header Access-Control-Allow-Origin *;
        add_header Access-Control-Allow-Headers "*";
    }

        location /top-scores {
        proxy_pass http://${BACKEND_HOST}:${BACKEND_PORT}/top-scores;
        add_header Access-Control-Allow-Methods "GET, POST, OPTIONS";
        add_header Access-Control-Allow-Origin *;
        add_header Access-Control-Allow-Headers "*";
    }
}
